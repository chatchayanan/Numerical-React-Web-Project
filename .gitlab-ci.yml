stages: 
  - install
  - test
  - build
  - testFront
  - testBack
  - testCal
  - deploy

install project:
  stage: install
  image: node:16-alpine
  script:
    - npm install
    - npm run test

build project:
  stage: build
  image: node:16-alpine
  script:
    - npm install
    - sudo npm run build
  artifacts:
    paths:
      - build/

test website:
  image: alpine
  stage: test
  script:
    - test build/index.html

test front:
  image: alpine
  stage: testFront
  script:
    - test src/app.js

test back:
  image: alpine
  stage: testBack
  script:
    - test server/server.js

test cal:
  image: alpine
  stage: testCal
  script:
    - test src/component/RO_C/BS.js

netlify:
  stage: deploy
  image: node:alpine3.14
  script:
    - npm install -g netlify-cli
    - netlify deploy --dir=build